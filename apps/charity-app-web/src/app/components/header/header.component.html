<header class="bg-primary text-neutral-content sticky top-0 z-50">
  <div class="container mx-auto px-4 py-3 flex justify-between items-center">
    <h1 class="text-2xl font-bold">
      <a class="w-full h-full block" routerLink="/">Charity</a>
    </h1>
    <nav>
      <ul class="flex space-x-2 items-center">
        <li>
          <a
            routerLink="/"
            routerLinkActive="bg-white text-primary shadow-md"
            [routerLinkActiveOptions]="{ exact: true }"
            class="px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-white hover:text-primary hover:shadow-md"
            >Home</a
          >
        </li>
        <li>
          <a
            routerLink="/organisations"
            routerLinkActive="bg-white text-primary shadow-md"
            class="px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-white hover:text-primary hover:shadow-md"
            >Organisations</a
          >
        </li>
        <li>
          <a
            routerLink="/cart"
            routerLinkActive="bg-white text-primary shadow-md"
            class="cart-icon relative inline-flex px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-white hover:text-primary hover:shadow-md"
            [class.cart-bounce]="isCartBouncing()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2">
              <path d="M3 7h18l-2 10a2 2 0 01-2 2H7a2 2 0 01-2-2L3 7z" />
              <path d="M8 7l4-4 4 4" />
              <path
                d="M12 11.8l-1.45-1.32a2 2 0 00-2.9.12 2 2 0 000 2.84L12 16.3l4.35-3.86a2 2 0 000-2.84 2 2 0 00-2.9-.12L12 11.8z"
                fill="currentColor"
                stroke="none" />
            </svg>

            <span class="cart-count">{{ cartStore.totalItems() }}</span>
          </a>
        </li>
        @if((currentUser$ | async) === null) {
        <li>
          <a
            routerLink="/auth/login"
            class="px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-white hover:text-primary hover:shadow-md"
            >Login</a
          >
        </li>
        <li>
          <a
            routerLink="/auth/signup"
            class="px-4 py-2 rounded-lg font-medium bg-primary-content text-primary transition-all duration-200 hover:shadow-md"
            >Sign Up</a
          >
        </li>
        } @else {
        <li class="relative">
          <button
            (click)="toggleDropdown()"
            class="flex items-center space-x-2 hover:opacity-80 focus:outline-none"
            aria-haspopup="true"
            [attr.aria-expanded]="isDropdownOpen">
            <img
              [src]="getUserPhotoUrl(currentUser$ | async)"
              [alt]="getUserDisplayName(currentUser$ | async) + ' avatar'"
              class="w-8 h-8 rounded-full" />
            <span class="text-sm">{{ getUserDisplayName(currentUser$ | async) }}</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div
            *ngIf="isDropdownOpen"
            class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 text-gray-700"
            role="menu">
            <button
              class="relative"
              role="menuitem"
              (click)="toggleDropdown()"
              class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100">
              <a class="w-full h-full block" routerLink="/orders">Donations</a>
            </button>
            <button
              (click)="logout()"
              class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"
              role="menuitem">
              Logout
            </button>
          </div>
        </li>
        }
      </ul>
    </nav>
  </div>
</header>
